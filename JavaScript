// قاعدة معرفة الأمن السيبراني
const cybersecurityKB = {
    "الهكر الأخلاقي": {
        definition: "محترف معتمد يستخدم تقنيات الاختراق لاكتشاف الثغرات الأمنية في الأنظمة بغرض تعزيز الحماية.",
        tools: ["Nmap", "Wireshark", "Metasploit", "Burp Suite"],
        steps: ["الحصول على تصريح كتابي", "تحديد نطاق الاختبار", "تقرير النتائج", "تصحيح الثغرات"]
    },
    "أمن الشبكات": {
        definition: "حماية البنية التحتية للشبكة من الوصول غير المصرح به أو الهجمات الإلكترونية.",
        protocols: ["VPN", "Firewall", "IDS/IPS", "SSL/TLS"]
    },
    "التحقيق الجنائي الرقمي": {
        definition: "جمع وتحليل الأدلة الرقمية من الأجهزة الإلكترونية لغرض التحقيقات القانونية.",
        tools: ["FTK Imager", "Autopsy", "EnCase", "Volatility"]
    }
};

// معالجة الأسئلة
function handleQuestion(question) {
    const keywords = {
        "هكر": "الهكر الأخلاقي",
        "شبكات": "أمن الشبكات",
        "جنائي": "التحقيق الجنائي الرقمي",
        "كالي لينكس": "أدوات الاختبار"
    };
    
    let response = "";
    let matchedTopic = "";
    
    // البحث عن المفتاح المناسب
    for (const [key, topic] of Object.entries(keywords)) {
        if (question.includes(key)) {
            matchedTopic = topic;
            break;
        }
    }
    
    // توليد الرد
    if (matchedTopic && cybersecurityKB[matchedTopic]) {
        const topicData = cybersecurityKB[matchedTopic];
        response = `
            <h5>${matchedTopic}:</h5>
            <p>${topicData.definition}</p>
            ${topicData.tools ? `<p><strong>أدوات رئيسية:</strong> ${topicData.tools.join('، ')}</p>` : ''}
            ${topicData.steps ? `<ol>${topicData.steps.map(step => `<li>${step}</li>`).join('')}</ol>` : ''}
        `;
    } else {
        response = `<p>أحتاج إلى مزيد من التوضيح. هل تقصد أحد هذه المواضيع؟</p>
                   <ul>
                       <li>الهكر الأخلاقي</li>
                       <li>أمن الشبكات</li>
                       <li>التحقيق الجنائي الرقمي</li>
                   </ul>`;
    }
    
    // إضافة روابط مقترحة
    response += `<div class="mt-3">
        <h6>مقالات ذات صلة:</h6>
        <ul>
            <li><a href="#">دليل شامل للهكر الأخلاقي</a></li>
            <li><a href="#">أفضل 10 أدوات لأمن الشبكات</a></li>
        </ul>
    </div>`;
    
    return response;
}

// مثال على تفاعل
const userQuestion = "ما هو الهكر الأخلاقي؟";
const botResponse = handleQuestion(userQuestion);
console.log(botResponse);
